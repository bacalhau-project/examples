# Wind Turbine Data Pipeline Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              WIND FARM DEPLOYMENTS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  US-EAST-1 Region                          US-WEST-2 Region                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Wind Farm A   â”‚                       â”‚   Wind Farm C   â”‚                    â”‚
â”‚  â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                       â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                    â”‚
â”‚  â”‚  150 Turbines   â”‚                       â”‚  200 Turbines   â”‚                    â”‚
â”‚  â”‚ [Expanso Nodes] â”‚                       â”‚ [Expanso Nodes] â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                          â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Wind Farm B   â”‚                       â”‚   Wind Farm D   â”‚                    â”‚
â”‚  â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                       â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                    â”‚
â”‚  â”‚  175 Turbines   â”‚                       â”‚  125 Turbines   â”‚                    â”‚
â”‚  â”‚ [Expanso Nodes] â”‚                       â”‚ [Expanso Nodes] â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                          â”‚                             â”‚
â”‚           â–¼                                          â–¼                             â”‚
â”‚     SQLite â†’ S3                               SQLite â†’ S3                          â”‚
â”‚                                                                                     â”‚
â”‚  EU-WEST-1 Region                          AP-SOUTHEAST-1 Region                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Wind Farm E   â”‚                       â”‚   Wind Farm G   â”‚                    â”‚
â”‚  â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                       â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                    â”‚
â”‚  â”‚  225 Turbines   â”‚                       â”‚  100 Turbines   â”‚                    â”‚
â”‚  â”‚ [Expanso Nodes] â”‚                       â”‚ [Expanso Nodes] â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                          â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Wind Farm F   â”‚                       â”‚   Wind Farm H   â”‚                    â”‚
â”‚  â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                       â”‚  ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸ ðŸŒ¬ï¸  â”‚                    â”‚
â”‚  â”‚  300 Turbines   â”‚                       â”‚  150 Turbines   â”‚                    â”‚
â”‚  â”‚ [Expanso Nodes] â”‚                       â”‚ [Expanso Nodes] â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                          â”‚                             â”‚
â”‚           â–¼                                          â–¼                             â”‚
â”‚     SQLite â†’ S3                               SQLite â†’ S3                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           S3 DATA LAKE ARCHITECTURE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  Pipeline Stage Buckets (us-west-2)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ðŸ“¦ expanso-databricks-       â”‚          â”‚ ðŸ“¦ expanso-databricks-       â”‚         â”‚
â”‚  â”‚    ingestion                â”‚          â”‚    validated               â”‚         â”‚
â”‚  â”‚    â””â”€â”€ ingestion/           â”‚          â”‚    â””â”€â”€ validated/         â”‚         â”‚
â”‚  â”‚        â””â”€â”€ year=2024/       â”‚          â”‚        â””â”€â”€ year=2024/     â”‚         â”‚
â”‚  â”‚            â””â”€â”€ month=01/    â”‚          â”‚            â””â”€â”€ month=01/  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ðŸ“¦ expanso-databricks-       â”‚          â”‚ ðŸ“¦ expanso-databricks-       â”‚         â”‚
â”‚  â”‚    enriched                 â”‚          â”‚    aggregated              â”‚         â”‚
â”‚  â”‚    â””â”€â”€ enriched/            â”‚          â”‚    â””â”€â”€ aggregated/        â”‚         â”‚
â”‚  â”‚        â””â”€â”€ year=2024/       â”‚          â”‚        â””â”€â”€ year=2024/     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                                     â”‚
â”‚  Support Buckets                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ðŸ“¦ expanso-databricks-       â”‚          â”‚ ðŸ“¦ expanso-databricks-       â”‚         â”‚
â”‚  â”‚    checkpoints              â”‚          â”‚    metadata                â”‚         â”‚
â”‚  â”‚    â””â”€â”€ checkpoints/         â”‚          â”‚    â””â”€â”€ metadata/          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DATABRICKS UNITY CATALOG                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚                    External Locations & Tables                   â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_ingestion     â†’ s3://expanso-databricks-ingestion/  â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_validated     â†’ s3://expanso-databricks-validated/  â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_enriched      â†’ s3://expanso-databricks-enriched/   â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_aggregated    â†’ s3://expanso-databricks-aggregated/ â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_checkpoints   â†’ s3://expanso-databricks-checkpoints/â”‚              â”‚
â”‚  â”‚  ðŸ“ expanso_metadata      â†’ s3://expanso-databricks-metadata/   â”‚              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚                      Auto Loader Tables                         â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â”‚  ðŸ“Š wind_turbine_raw       (streaming from ingestion bucket)   â”‚              â”‚
â”‚  â”‚  ðŸ“Š wind_turbine_validated (streaming from validated bucket)   â”‚              â”‚
â”‚  â”‚  ðŸ“Š wind_turbine_enriched  (streaming from enriched bucket)    â”‚              â”‚
â”‚  â”‚  ðŸ“Š wind_turbine_aggregated (streaming from aggregated bucket) â”‚              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚                    Analytics Views & Dashboards                 â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â”‚  ðŸ” wind_turbine_performance_view                              â”‚              â”‚
â”‚  â”‚     Real-time performance metrics across all turbines          â”‚              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â”‚  ðŸ” wind_turbine_anomaly_detection                             â”‚              â”‚
â”‚  â”‚     Aggregated anomaly detection and alerts                    â”‚              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â”‚  ðŸ” wind_turbine_maintenance_dashboard                         â”‚              â”‚
â”‚  â”‚     Predictive maintenance insights from enriched data         â”‚              â”‚
â”‚  â”‚                                                                 â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Details

### 1. Edge Collection (Wind Turbines)
- **1,500+ wind turbines** across 8 wind farms in 4 regions
- Each turbine runs an **Expanso node** with SQLite database
- Collects sensor data: RPM, power output, temperature, vibration, wind speed
- Data stored locally in SQLite with automatic timestamp tracking

### 2. Pipeline Processing Stages
Each Expanso node processes data through four stages:
- **ingestion**: Raw unprocessed sensor readings
- **validated**: Schema-validated data with quality checks
- **enriched**: Data enriched with Bacalhau metadata and privacy protection
- **aggregated**: Time-window aggregated data with anomaly detection

### 3. S3 Data Lake
Data is organized with:
- **Time-based partitioning**: year/month/day/hour
- **Parquet format** for efficient columnar storage
- **JSON metadata** files for each batch
- **Lifecycle policies** to move old data to cheaper storage

### 4. Databricks Unity Catalog
Provides unified access through:
- **External Locations** mapping to S3 buckets
- **Auto Loader tables** for streaming ingestion
- **Analytics views** for performance monitoring and maintenance

## Example Queries

```sql
-- Turbine performance metrics
SELECT 
  turbine_id,
  AVG(power_output) as avg_power_mw,
  AVG(efficiency) as avg_efficiency,
  MAX(temperature) as max_temp
FROM wind_turbine_aggregated
WHERE date = current_date()
GROUP BY turbine_id;

-- Anomaly detection
SELECT 
  turbine_id,
  timestamp,
  vibration_level,
  temperature,
  'High vibration detected' as alert_type
FROM wind_turbine_enriched
WHERE vibration_level > threshold_value
  AND timestamp > current_timestamp() - INTERVAL 1 HOUR
ORDER BY timestamp DESC;

-- Maintenance planning
SELECT 
  turbine_id,
  COUNT(*) as anomaly_count,
  AVG(vibration_level) as avg_vibration,
  MAX(temperature) as max_temperature
FROM wind_turbine_validated
WHERE timestamp > current_timestamp() - INTERVAL 7 DAYS
GROUP BY turbine_id
HAVING anomaly_count > 10
ORDER BY anomaly_count DESC;
```

## Benefits of This Architecture

1. **Scalability**: Handles thousands of turbines across multiple regions
2. **Reliability**: S3 provides 99.999999999% durability
3. **Cost Efficiency**: Single region storage with lifecycle policies
4. **Real-time Analytics**: Auto Loader enables near real-time insights
5. **Data Quality**: Progressive validation and enrichment through pipeline stages
6. **Flexibility**: Four distinct pipeline stages for different processing needs
7. **Unified View**: Unity Catalog provides single pane of glass